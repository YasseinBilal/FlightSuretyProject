exports.id=0,exports.modules={"./src/server/server.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/server/server-config.json"),s=n("web3"),c=n.n(s),o=n("express"),a=n.n(o),u=(n("cors"),n("./build/contracts/FlightSuretyApp.json")),i=n("./build/contracts/FlightSuretyData.json");function l(e){throw new TypeError('"'+e+'" is read-only')}var f=r.localhost,h=new c.a(new c.a.providers.WebsocketProvider(f.url.replace("http","ws"))),d=a()();h.eth.defaultAccount=h.eth.accounts[0];var p=new h.eth.Contract(u.abi,f.appAddress),g=new h.eth.Contract(i.abi,f.dataAddress),m=[],v=[],A=E,E=10;p.events.OracleRequest({fromBlock:"latest"},(function(e,t){var n=t.returnValues.index,r=0;v.forEach((function(e){var s=m[r];e[0]!=n&&e[1]!=n&&e[2]!=n||function(e,t,n,r,s){p.methods.submitOracleResponse(t,n,r,s,A).send({from:e,gas:4e5,gasPrice:3e7}),20==A&&g.methods.creditInsurees(r).call({from:e})}(s,n,t.returnValues.airline,t.returnValues.flight,t.returnValues.timestamp),r++}))})),g.events.allEvents({fromBlock:"latest"},(function(e,t){e?console.log("error",e):console.log("event",t)})),new Promise((function(e,t){h.eth.getAccounts().then((function(e){return e.slice(20,45),l("oracleAccounts"),m})).catch((function(e){t(e)}))})).then((function(e){var t;(t=e,new Promise((function(e,n){p.methods.REGISTRATION_FEE().call().then((function(r){for(var s=function(e){p.methods.registerOracle().send({from:t[e],value:r,gas:4e6,gasPrice:3e7}).then((function(){p.methods.getMyIndexes().call({from:t[e]}).then((function(e){v.push(e)})).catch((function(e){n(e)}))})).catch((function(e){n(e)}))},c=0;c<25;c++)s(c);e(v)})).catch((function(e){n(e)}))}))).catch((function(e){console.log(e.message)}))})),d.get("/api",(function(e,t){t.send({message:"An API for use with your Dapp!"})})),d.get("/api/status/:status",(function(e,t){var n="Status changed, ";switch(e.params.status){case"10":l("currentStatus"),n=n.concat("ON TIME");break;case"20":l("currentStatus"),n=n.concat("LATE AIRLINE");break;case"30":l("currentStatus"),n=n.concat("LATE WEATHER");break;case"40":l("currentStatus"),n=n.concat("LATE TECHNICAL");break;case"50":l("currentStatus"),n=n.concat("LATE OTHER");break;default:l("currentStatus"),n=n.concat("UNKNOWN")}t.send({message:n})})),d.listen(80,(function(){console.log("app listening on port",80)})),t.default=d},cors:function(e,t){e.exports=require("cors")}};